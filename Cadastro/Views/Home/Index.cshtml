@using Cadastro.Models.ViewModel.Application.AccessContext;

@using Cadastro.Models.ViewModel.Application.Notifications.Alerts;
@{
    ViewData["title"] = "Home";
    //List<Usuario> usuarios = (List<Usuario>)ViewData["Usuarios"];
    int totalUsuarios = (int)ViewData["totalUsuarios"];
    AcessoServiceVM acesso = (AcessoServiceVM)ViewData["acesso"] ?? null;
    string msgResult = (string)ViewData["msgResult"];
}

<!-- Alert Message -->
@Html.Raw(AlertMessage.GetMessage(msgResult))

<article>

    <div class="row">
        <div class="col-0 col-md-3"></div>
        <div class="col-12 col-md-6">
        </div>
        <div class="col-0 col-md-3"></div>
    </div>



    @* Conteúdo da Home *@
    @if (acesso._permissao.ConteudoHome) {
        @Html.Raw(Program.Config.conteudoHome1.Replace("#nome-sistema", Program.Config.nomeSistema).
        Replace("#nome", acesso._usuario.GetNome).
        Replace("#cpf", acesso._usuario.GetCpf).
        Replace("#email", acesso._usuario.GetEmail).
        Replace("#url-site", Program.Config.urlSite).
        Replace("#url-sistema", Url.ActionLink("", "")).
        Replace("#data-atual", DateTime.Now.ToString()).
        Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }
    @if (acesso._permissao.ConteudoHome2) {
        @Html.Raw(Program.Config.conteudoHome2.Replace("#nome-sistema", Program.Config.nomeSistema).
        Replace("#nome", acesso._usuario.GetNome).
        Replace("#cpf", acesso._usuario.GetCpf).
        Replace("#email", acesso._usuario.GetEmail).
        Replace("#url-site", Program.Config.urlSite).
        Replace("#url-sistema", Url.ActionLink("", "")).
        Replace("#data-atual", DateTime.Now.ToString()).
        Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }
    @if (acesso._permissao.ConteudoHome3) {
        @Html.Raw(Program.Config.conteudoHome3.Replace("#nome-sistema", Program.Config.nomeSistema).
        Replace("#nome", acesso._usuario.GetNome).
        Replace("#cpf", acesso._usuario.GetCpf).
        Replace("#email", acesso._usuario.GetEmail).
        Replace("#url-site", Program.Config.urlSite).
        Replace("#url-sistema", Url.ActionLink("", "")).
        Replace("#data-atual", DateTime.Now.ToString()).
        Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }
    @if (acesso._permissao.ConteudoHome4) {
        @Html.Raw(Program.Config.conteudoHome4.Replace("#nome-sistema", Program.Config.nomeSistema).
        Replace("#nome", acesso._usuario.GetNome).
        Replace("#cpf", acesso._usuario.GetCpf).
        Replace("#email", acesso._usuario.GetEmail).
        Replace("#url-site", Program.Config.urlSite).
        Replace("#url-sistema", Url.ActionLink("", "")).
        Replace("#data-atual", DateTime.Now.ToString()).
        Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }
    @if (acesso._permissao.ConteudoHome5) {
        @Html.Raw(Program.Config.conteudoHome5.Replace("#nome-sistema", Program.Config.nomeSistema).
        Replace("#nome", acesso._usuario.GetNome).
        Replace("#cpf", acesso._usuario.GetCpf).
        Replace("#email", acesso._usuario.GetEmail).
        Replace("#url-site", Program.Config.urlSite).
        Replace("#url-sistema", Url.ActionLink("", "")).
        Replace("#data-atual", DateTime.Now.ToString()).
        Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }
    @if (acesso._permissao.ConteudoHome6) {
        @Html.Raw(Program.Config.conteudoHome6.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome7) {
        @Html.Raw(Program.Config.conteudoHome7.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome8) {
        @Html.Raw(Program.Config.conteudoHome8.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome9) {
        @Html.Raw(Program.Config.conteudoHome9.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome10) {
        @Html.Raw(Program.Config.conteudoHome10.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome11) {
        @Html.Raw(Program.Config.conteudoHome11.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome12) {
        @Html.Raw(Program.Config.conteudoHome12.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome13) {
        @Html.Raw(Program.Config.conteudoHome13.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome14) {
        @Html.Raw(Program.Config.conteudoHome14.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome15) {
        @Html.Raw(Program.Config.conteudoHome15.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome16) {
        @Html.Raw(Program.Config.conteudoHome16.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome17) {
        @Html.Raw(Program.Config.conteudoHome17.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome18) {
        @Html.Raw(Program.Config.conteudoHome18.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome19) {
        @Html.Raw(Program.Config.conteudoHome19.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ConteudoHome20) {
        @Html.Raw(Program.Config.conteudoHome20.Replace("#nome-sistema", Program.Config.nomeSistema).
    Replace("#nome", acesso._usuario.GetNome).
    Replace("#cpf", acesso._usuario.GetCpf).
    Replace("#email", acesso._usuario.GetEmail).
    Replace("#url-site", Program.Config.urlSite).
    Replace("#url-sistema", Url.ActionLink("", "")).
    Replace("#data-atual", DateTime.Now.ToString()).
    Replace("#codigo-usuario", acesso._usuario.CodigoUsuario??"[Indisponível]"))
    }

    @if (acesso._permissao.ContagemUsuarios) {
        <hr />
    }

    <div class="container mt-5">

        <!--<h2>Notificações</h2>-->
        <div class="row">
            @if (acesso._permissao.UltimosEventos && false) {


                <div class="col-12 col-lg-6">
                    <div id="tracking-pre"></div>
                    <div id="tracking" class="shadow">
                        <div class="text-center tracking-status-intransit">
                            <p class="tracking-status text-tight">Últimos Eventos</p>
                        </div>
                        <div style="height:539px; overflow-y: auto;" class="tracking-list">


                            <div class="tracking-item">
                                <div class="tracking-icon status-intransit">
                                    <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                        <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
                                    </svg>
                                    <!-- <i class='fas fa-circle'></i> -->
                                </div>

                                <div class="tracking-date">Set 07, 2020<!--Aug 10, 2018--><span>05:27 PM<!--05:01 PM--></span></div>
                                <div class="tracking-content">Status Alterado<span>Status do Usuário <a href="painel.php?pag=1.0&amp;pagD=0&amp;id=1823"></a> alterado para "ativo", pelo Usuário <a href="painel.php?pag=1.0&amp;pagD=0&amp;id=1">site@site.com.br</a></span></div>
                            </div>


                        </div>
                    </div>
                </div>
            }

            <div class="col-12 col-lg-3"></div>@*Apagar Linha*@
            @if (acesso._permissao.ContagemUsuarios) {


                <div class="col-12 col-lg-6">
                    <div id="tracking-pre"></div>
                    <div style="overflow: auto;" id="tracking" class="shadow">

                        <div class="text-center tracking-status-intransit">
                            <p class="tracking-status text-tight">Contagem de @Program.Config.nomeUserPlural</p>
                        </div>

                        <table class="table border mb-0">
                            <tbody>
                                <tr class="text-info"><th>Total de @Program.Config.nomeUserPlural</th><td>@totalUsuarios</td></tr>
                                @*<tr><th>@Program.Config.nomeUserPlural Ativos</th><td>@usuarios.Count( u => u.Status == EStatus.Ativo )</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural Inativo</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Inativo)</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural Apto</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Apto)</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural Inapto</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Inapto)</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural em Observação</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Observação)</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural Aguardando</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Aguardando)</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural Suspensos</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Suspenso)</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural Indisciplinado</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Indisciplinado)</td></tr>
                                <tr><th class="text-muted">@Program.Config.nomeUserPlural Inadimplente</th><td class="text-muted">@usuarios.Count(u => u.Status == EStatus.Inadimplente)</td></tr>
                                <tr @*class="text-danger"<!--class="text-muted"><th>@Program.Config.nomeUserPlural Excluídos</th><td>@usuarios.Count(u => u.Status == EStatus.Excluído)</td></tr>*@
                            </tbody>
                        </table>

                    </div>
                </div>
            }

            <div class="col-12 col-lg-3"></div>@*Apagar Linha*@
        </div>
        <!-- Fim TimeLine -->

    </div>
</article>

@* Nodal *@
@* @if (acesso._usuario.HierarquiasUsuario.Where(hu => hu != null).Any(hu => hu.Hierarquia?.HierarquiaId == 1)) {
    <!-- thank you Modal -->
    <div class="modal fade text-center py-5" style="top:30px" id="thanksModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    <h3 class="pt-1 mb-0 text-secondary">@(acesso._usuario.GetFirstName)</h3>
                    <p class="pb-3 text-info">
                    <p>
                        Seja Bem Vindo(a) Ao<br />@Program.Config.nomeSistema!
                    </p>

                    <p class="mb-0">Seu Código de Usuário</p>
                    <h4 class="text-danger font-weight-bolder mt-0 mb-3">@(acesso?._usuario.CodigoUsuario ?? "[Indisponível]")</h4>

                    <p>
                        Salve seu Código de Usuário.<br /><br />*@
                            @*<!- <a class="btn btn-success pointer-event" target="_blank" href="@Program.Config.foneUrl">
                    @Program.Config.fone
                    <svg style="width: 16px;" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="whatsapp" class="svg-inline--fa fa-whatsapp fa-w-14 d-inline mb-1" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"></path></svg>
                    </a>-->*@
                    
                @*</p>
                    <a role="button" class="btn btn-secondary text-white mb-3 pointer-event" onclick="$('#thanksModal').modal('hide')">Voltar ao Painel</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(window).on('load', function () {
            $('#thanksModal').modal('show');
        });
        $(function () {
            $("#search").addClass("d-none");
        });
        $(".toggle-search").click(function () {
            $("#search").removeClass("d-none");
            $("#search").addClass("d-block slideDown");
            $(".navbar").removeClass("d-flex slideDown");
            $(".navbar").addClass("d-none");
        });
        $(".hide-search").click(function () {
            $("#search").removeClass("d-block slideDown");
            $(".navbar").addClass("d-flex slideDown");
            $("#search").addClass("d-none");
        });
    </script>
} *@
